//此文件用来迁移数据库，生成prismaclient
//迁移使用命令 npm run migrate 此命令设置环境为development，按需修改命令
//使用npm run prisma命令可直接在浏览器在线预览数据库
//使用npm run migrate:reset 将会重置数据库
//注意，对应已经应用的迁移数据库，需要先执行reset再进行迁移(有误)
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("Prisma_DATABASE")
}

// 用户登录表
model User {
  id           Int          @id @default(autoincrement())
  userId       String       @unique @default(uuid())
  email        String       @unique
  hashPassword String
  role         Role         @default(USER)
  createdAt    DateTime     @default(now())
  profile      UserProfile?
}

// 用户信息表
model UserProfile {
  id       Int     @id @default(autoincrement())
  userId   String  @unique
  userAuth User    @relation(fields: [userId], references: [userId])
  name     String?
  phone    String? @unique
  address  String?
}

// 角色枚举
enum Role {
  USER
  ADMIN
}
